<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoodMate â€“ Connect by Feelings</title>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-storage-compat.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #8a2be2;
            --secondary: #ff69b4;
            --accent: #9370db;
            --light: #f8f4ff;
            --dark: #2d1b69;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --gradient: linear-gradient(135deg, var(--primary), var(--secondary));
            --card-shadow: 0 10px 20px rgba(138, 43, 226, 0.15);
            --glow: 0 0 15px rgba(138, 43, 226, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #f8f4ff 100%);
            color: #333;
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header & Navigation */
        header {
            background: var(--gradient);
            color: white;
            padding: 15px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 700;
        }

        .logo i {
            font-size: 2rem;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 15px;
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        nav a:hover, nav a.active {
            background: rgba(255, 255, 255, 0.2);
        }

        .user-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .btn {
            padding: 10px 20px;
            border-radius: 30px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--gradient);
            color: white;
            box-shadow: var(--glow);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(138, 43, 226, 0.4);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid white;
            color: white;
        }

        .btn-outline:hover {
            background: white;
            color: var(--primary);
        }

        /* Hero Section */
        .hero {
            padding: 80px 0;
            text-align: center;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%238a2be2" fill-opacity="0.1" d="M0,224L48,213.3C96,203,192,181,288,181.3C384,181,480,203,576,202.7C672,203,768,181,864,165.3C960,149,1056,139,1152,149.3C1248,160,1344,192,1392,208L1440,224L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"></path></svg>') no-repeat bottom;
            background-size: cover;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 30px;
            color: #555;
        }

        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        /* Mood Selection */
        .mood-selection {
            padding: 60px 0;
            background: white;
            border-radius: 30px;
            margin: 30px auto;
            box-shadow: var(--card-shadow);
        }

        .section-title {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.2rem;
            color: var(--dark);
        }

        .mood-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        .mood-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: 2px solid transparent;
        }

        .mood-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--card-shadow);
            border-color: var(--accent);
        }

        .mood-card.selected {
            border-color: var(--primary);
            box-shadow: var(--glow);
        }

        .mood-emoji {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .mood-name {
            font-weight: 600;
            color: var(--dark);
        }

        /* Chat Interface */
        .chat-container {
            display: none;
            max-width: 800px;
            margin: 30px auto;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
        }

        .chat-header {
            background: var(--gradient);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-messages {
            height: 400px;
            padding: 20px;
            overflow-y: auto;
            background: #f9f7ff;
        }

        .message {
            margin-bottom: 15px;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .message.self {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .message-content {
            max-width: 70%;
            padding: 12px 15px;
            border-radius: 18px;
            background: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .message.self .message-content {
            background: var(--gradient);
            color: white;
        }

        .chat-input {
            display: flex;
            padding: 15px;
            background: white;
            border-top: 1px solid #eee;
        }

        .chat-input input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 30px;
            outline: none;
            font-size: 1rem;
        }

        .chat-input button {
            margin-left: 10px;
            background: var(--gradient);
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chat-input button:hover {
            transform: scale(1.05);
        }

        /* Dashboard */
        .dashboard {
            padding: 40px 0;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .dashboard-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--card-shadow);
        }

        .dashboard-card h3 {
            margin-bottom: 15px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .active-users {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .user-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #f0e6ff;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .user-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        /* Profile */
        .profile {
            padding: 40px 0;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5rem;
        }

        .profile-info h2 {
            font-size: 1.8rem;
            margin-bottom: 5px;
            color: var(--dark);
        }

        .profile-info p {
            color: #666;
        }

        .profile-stats {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-label {
            font-size: 0.9rem;
            color: #777;
        }

        /* About Section */
        .about-section {
            padding: 60px 0;
            background: white;
            border-radius: 30px;
            margin: 30px auto;
            box-shadow: var(--card-shadow);
        }

        .developer-info, .contact-info {
            max-width: 700px;
            margin: 0 auto;
            padding: 20px;
        }

        .info-item, .contact-item {
            margin-bottom: 20px;
            padding: 15px;
            background: #f9f7ff;
            border-radius: 10px;
        }

        .info-item h3, .contact-item h3 {
            color: var(--primary);
            margin-bottom: 10px;
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .social-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--primary);
            text-decoration: none;
            padding: 8px 15px;
            background: #f0e6ff;
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .social-link:hover {
            background: var(--gradient);
            color: white;
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 50px 0 20px;
            margin-top: 60px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-column h3 {
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 10px;
        }

        .footer-column a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-column a:hover {
            color: white;
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #aaa;
            font-size: 0.9rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            nav ul {
                gap: 10px;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .mood-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .profile-header {
                flex-direction: column;
                text-align: center;
            }

            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
        }

        /* Authentication Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.5rem;
            color: var(--dark);
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #777;
        }

        .auth-form input, .auth-form select {
            width: 100%;
            padding: 12px 15px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
        }

        .auth-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }

        .auth-divider {
            text-align: center;
            margin: 15px 0;
            position: relative;
        }

        .auth-divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: #ddd;
        }

        .auth-divider span {
            background: white;
            padding: 0 15px;
            color: #777;
        }

        .error-message {
            color: var(--danger);
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }

        .success-message {
            color: var(--success);
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }

        /* Page Sections */
        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-heart"></i>
                    <span>MoodMate</span>
                </div>
                <nav>
                    <ul>
                        <li><a href="#" class="nav-link active" data-page="home">Home</a></li>
                        <li><a href="#" class="nav-link" data-page="connect">Connect</a></li>
                        <li><a href="#" class="nav-link" data-page="profile">Profile</a></li>
                        <li><a href="#" class="nav-link" data-page="about">About</a></li>
                    </ul>
                </nav>
                <div class="user-actions">
                    <button class="btn btn-outline" id="loginBtn">Log In</button>
                    <button class="btn btn-primary" id="signupBtn">Sign Up</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Home Section -->
    <section class="page-section active" id="home">
        <!-- Hero Section -->
        <section class="hero">
            <div class="container">
                <h1>Connect by Feelings</h1>
                <p>MoodMate is a social platform that connects you in real time based on your current mood. Find someone who understands how you feel right now.</p>
                <div class="hero-buttons">
                    <button class="btn btn-primary" id="getStartedBtn">Get Started <i class="fas fa-arrow-right"></i></button>
                    <button class="btn btn-outline">How It Works</button>
                </div>
            </div>
        </section>

        <!-- Mood Selection -->
        <section class="mood-selection container">
            <h2 class="section-title">How are you feeling today?</h2>
            <div class="mood-grid" id="moodGrid">
                <!-- Mood cards will be populated dynamically -->
            </div>
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-primary" id="findMatchBtn">Find My MoodMate</button>
            </div>
        </section>

        <!-- Dashboard -->
        <section class="dashboard container">
            <h2 class="section-title">Active Users</h2>
            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <h3><i class="fas fa-users"></i> Online Now</h3>
                    <div class="active-users" id="activeUsers">
                        <!-- Active users will be populated dynamically -->
                    </div>
                </div>
                <div class="dashboard-card">
                    <h3><i class="fas fa-chart-line"></i> Your Mood History</h3>
                    <div id="moodHistoryChart" style="height: 200px; background: #f9f7ff; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #777;">
                        Mood chart will appear here
                    </div>
                </div>
                <div class="dashboard-card">
                    <h3><i class="fas fa-trophy"></i> Kindness Points</h3>
                    <div style="text-align: center; padding: 20px;">
                        <div id="kindnessPoints" style="font-size: 3rem; color: var(--primary); margin-bottom: 10px;">0</div>
              
                    </div>
                </div>
            </div>
        </section>
    </section>

    <!-- Connect Section -->
    <section class="page-section" id="connect">
        <div class="mood-selection container">
            <h2 class="section-title">Connect with Others</h2>
            <p style="text-align: center; margin-bottom: 30px; font-size: 1.1rem;">Select your current mood and find someone who complements your feelings</p>
            <div class="mood-grid" id="connectMoodGrid">
                <!-- Mood cards will be populated dynamically -->
            </div>
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-primary" id="connectFindMatchBtn">Find My MoodMate</button>
            </div>
        </div>

        <!-- Chat Interface -->
        <div class="chat-container" id="chatContainer">
            <div class="chat-header">
                <div>
                    <h3>Chat with <span id="chatPartnerName">...</span></h3>
                    <p id="connectionInfo">Connecting...</p>
                </div>
                <div>
                    <button class="btn btn-outline" id="endChatBtn">End Chat</button>
                </div>
            </div>
            <div class="chat-messages" id="chatMessages">
                <!-- Chat messages will be populated dynamically -->
            </div>
            <div class="chat-input">
                <input type="text" placeholder="Type your message..." id="messageInput">
                <button id="sendMessageBtn"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
    </section>

    <!-- Profile Section -->
    <section class="page-section" id="profile">
        <div class="profile container">
            <h2 class="section-title">Your Profile</h2>
            <div class="profile-header">
                <div class="profile-avatar" id="profileAvatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="profile-info">
                    <h2 id="profileName">...</h2>
                    <p id="profileBio">...</p>
                    <div class="profile-stats">
                        <div class="stat">
                            <div class="stat-value" id="connectionsCount">0</div>
                            <div class="stat-label">Connections</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="pointsCount">0</div>
                            <div class="stat-label">Kindness Points</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="activeDays">0</div>
                            <div class="stat-label">Days Active</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <h3><i class="fas fa-history"></i> Recent Moods</h3>
                    <div id="recentMoods" style="margin-top: 15px;">
                        <!-- Recent moods will be populated dynamically -->
                    </div>
                </div>
                <div class="dashboard-card">
                    <h3><i class="fas fa-user-edit"></i> Edit Profile</h3>
                    <div style="margin-top: 15px;">
                        <button class="btn btn-primary" id="editProfileBtn">Edit Profile</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section (includes Contact) -->
    <section class="page-section" id="about">
        <div class="about-section container">
            <h2 class="section-title">About MoodMate</h2>
            <div class="developer-info">
                <h3 style="text-align: center; margin-bottom: 30px; color: var(--primary);">Developer Information</h3>
                
                <div class="info-item">
                    <h3>Developed by:</h3>
                    <p>Yoseph Abebe Ersedo</p>
                </div>
                
                <div class="info-item">
                    <h3>University:</h3>
                    <p>Wachemo University</p>
                </div>
                
                <div class="info-item">
                    <h3>Department:</h3>
                    <p>Information Systems</p>
                </div>
                
                <div class="info-item">
                    <h3>Year:</h3>
                    <p>2025</p>
                </div>
                
                <div class="info-item">
                    <h3>Email:</h3>
                    <p>jossyabebe92@gmail.com</p>
                </div>
                
                <div class="info-item">
                    <h3>About the App:</h3>
                    <p>MoodMate is a social platform designed to connect people based on their current emotional state. It helps users find someone who can relate to their feelings, providing emotional support and meaningful connections.</p>
                </div>
            </div>

            <!-- Contact Information inside About Section -->
            <div class="contact-info">
                <h3 style="text-align: center; margin: 40px 0 20px; color: var(--primary);">Contact Information</h3>
                <p style="text-align: center; margin-bottom: 30px; font-size: 1.1rem;">Have questions or concerns? Feel free to reach out to us:</p>
                
                <div class="contact-item">
                    <h3>Phone:</h3>
                    <p>09-17-33-21-99</p>
                </div>
                
                <div class="contact-item">
                    <h3>Email:</h3>
                    <p>jossyabebe92@gmail.com</p>
                </div>
                
                <div class="contact-item">
                    <h3>Social Media:</h3>
                    <div class="social-links">
                        <a href="https://www.facebook.com/jossy.abebe.33" class="social-link" target="_blank">
                            <i class="fab fa-facebook"></i> Facebook
                        </a>
                        <a href="https://www.linkedin.com/in/jossy-abebe-69111734b?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app" class="social-link" target="_blank">
                            <i class="fab fa-linkedin"></i> LinkedIn
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>MoodMate</h3>
                    <p>Connect by feelings. Find understanding. Share emotions.</p>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#" class="nav-link" data-page="home">Home</a></li>
                        <li><a href="#" class="nav-link" data-page="about">About Us</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Support</h3>
                    <ul>
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#" class="nav-link" data-page="about">Contact Us</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Connect With Us</h3>
                    <ul>
                        <li><a href="#"><i class="fab fa-twitter"></i> Twitter</a></li>
                        <li><a href="#"><i class="fab fa-instagram"></i> Instagram</a></li>
                        <li><a href="https://www.facebook.com/jossy.abebe.33" target="_blank"><i class="fab fa-facebook"></i> Facebook</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                &copy; 2023 MoodMate. All rights reserved.
            </div>
        </div>
    </footer>

    <!-- Authentication Modal -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Sign Up</h3>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <div class="auth-form">
                <div id="signupFields">
                    <input type="text" placeholder="Full Name" id="fullName">
                    <select id="gender">
                        <option value="">Select Gender</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="other">Other</option>
                        <option value="prefer-not-to-say">Prefer not to say</option>
                    </select>
                    <input type="text" placeholder="Country" id="country">
                </div>
                <input type="email" placeholder="Email Address" id="email">
                <input type="password" placeholder="Password" id="password">
                <div class="error-message" id="authError"></div>
                <div class="success-message" id="authSuccess"></div>
                <button class="btn btn-primary" style="width: 100%;" id="authActionBtn">Create Account</button>
                <div class="auth-divider">
                    <span>or continue with</span>
                </div>
                <div class="auth-options">
                    <button class="btn btn-outline" style="justify-content: center;" id="googleSignIn">
                        <i class="fab fa-google" style="margin-right: 10px;"></i> Google
                    </button>
                    <button class="btn btn-outline" style="justify-content: center;" id="facebookSignIn">
                        <i class="fab fa-facebook" style="margin-right: 10px;"></i> Facebook
                    </button>
                </div>
                <p style="text-align: center; margin-top: 20px;">
                    <span id="authSwitchText">Already have an account?</span> 
                    <a href="#" style="color: var(--primary);" id="switchAuthMode">Log In</a>
                </p>
            </div>
        </div>
    </div>

    <script>
        // Firebase Configuration - Replace with your actual config
        const firebaseConfig = {
            apiKey: "AIzaSyDemoKeyForMoodMateApp12345",
            authDomain: "moodmate-app.firebaseapp.com",
            projectId: "moodmate-app",
            storageBucket: "moodmate-app.appspot.com",
            messagingSenderId: "123456789012",
            appId: "1:123456789012:web:abcd1234moodmateapp"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const storage = firebase.storage();

        // DOM Elements
        const loginBtn = document.getElementById('loginBtn');
        const signupBtn = document.getElementById('signupBtn');
        const getStartedBtn = document.getElementById('getStartedBtn');
        const authModal = document.getElementById('authModal');
        const closeModal = document.getElementById('closeModal');
        const modalTitle = document.getElementById('modalTitle');
        const switchAuthMode = document.getElementById('switchAuthMode');
        const authSwitchText = document.getElementById('authSwitchText');
        const authActionBtn = document.getElementById('authActionBtn');
        const signupFields = document.getElementById('signupFields');
        const authError = document.getElementById('authError');
        const authSuccess = document.getElementById('authSuccess');
        const googleSignIn = document.getElementById('googleSignIn');
        const facebookSignIn = document.getElementById('facebookSignIn');
        const findMatchBtn = document.getElementById('findMatchBtn');
        const connectFindMatchBtn = document.getElementById('connectFindMatchBtn');
        const chatContainer = document.getElementById('chatContainer');
        const endChatBtn = document.getElementById('endChatBtn');
        const sendMessageBtn = document.getElementById('sendMessageBtn');
        const messageInput = document.getElementById('messageInput');
        const chatMessages = document.getElementById('chatMessages');
        const chatPartnerName = document.getElementById('chatPartnerName');
        const connectionInfo = document.getElementById('connectionInfo');
        const moodGrid = document.getElementById('moodGrid');
        const connectMoodGrid = document.getElementById('connectMoodGrid');
        const activeUsers = document.getElementById('activeUsers');
        const profileName = document.getElementById('profileName');
        const profileBio = document.getElementById('profileBio');
        const profileAvatar = document.getElementById('profileAvatar');
        const connectionsCount = document.getElementById('connectionsCount');
        const pointsCount = document.getElementById('pointsCount');
        const activeDays = document.getElementById('activeDays');
        const kindnessPoints = document.getElementById('kindnessPoints');
        const recentMoods = document.getElementById('recentMoods');
        const editProfileBtn = document.getElementById('editProfileBtn');
        const navLinks = document.querySelectorAll('.nav-link');

        // App State
        let currentUser = null;
        let selectedMood = null;
        let isLoginMode = false;
        let currentChatPartner = null;
        let userProfile = null;

        // Mood Data
        const moods = [
            { emoji: "ðŸ˜Š", name: "Happy", color: "#FFD700" },
            { emoji: "ðŸ˜”", name: "Sad", color: "#6495ED" },
            { emoji: "ðŸ˜´", name: "Tired", color: "#708090" },
            { emoji: "ðŸ˜¡", name: "Angry", color: "#FF4500" },
            { emoji: "ðŸ˜Œ", name: "Calm", color: "#98FB98" },
            { emoji: "ðŸ¤”", name: "Thoughtful", color: "#DDA0DD" },
            { emoji: "ðŸ˜°", name: "Anxious", color: "#FFA07A" },
            { emoji: "ðŸŽ‰", name: "Excited", color: "#FF69B4" }
        ];

        // Initialize the app
        function initApp() {
            populateMoodGrids();
            setupEventListeners();
            setupNavigation();
            
            // Check auth state
            auth.onAuthStateChanged(user => {
                if (user) {
                    currentUser = user;
                    updateUIForUser(user);
                    loadUserProfile(user.uid);
                } else {
                    currentUser = null;
                    updateUIForGuest();
                }
            });
        }

        // Setup navigation
        function setupNavigation() {
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const page = link.getAttribute('data-page');
                    showPage(page);
                    
                    // Update active nav link
                    navLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                });
            });
        }

        // Show specific page
        function showPage(page) {
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(page).classList.add('active');
            
            // Special handling for certain pages
            if (page === 'connect' && !currentUser) {
                openAuthModal(true);
                showPage('home');
            } else if (page === 'profile' && !currentUser) {
                openAuthModal(true);
                showPage('home');
            }
        }

        // Populate mood selection grids
        function populateMoodGrids() {
            moodGrid.innerHTML = '';
            connectMoodGrid.innerHTML = '';
            
            moods.forEach(mood => {
                // For home page
                const moodCard = document.createElement('div');
                moodCard.className = 'mood-card';
                moodCard.innerHTML = `
                    <div class="mood-emoji">${mood.emoji}</div>
                    <div class="mood-name">${mood.name}</div>
                `;
                moodCard.addEventListener('click', () => selectMood(mood, moodCard));
                moodGrid.appendChild(moodCard);
                
                // For connect page
                const connectMoodCard = document.createElement('div');
                connectMoodCard.className = 'mood-card';
                connectMoodCard.innerHTML = `
                    <div class="mood-emoji">${mood.emoji}</div>
                    <div class="mood-name">${mood.name}</div>
                `;
                connectMoodCard.addEventListener('click', () => selectMood(mood, connectMoodCard));
                connectMoodGrid.appendChild(connectMoodCard);
            });
        }

        // Select a mood
        function selectMood(mood, card) {
            document.querySelectorAll('.mood-card').forEach(c => c.classList.remove('selected'));
            card.classList.add('selected');
            selectedMood = mood;
        }

        // Setup event listeners
        function setupEventListeners() {
            // Authentication
            loginBtn.addEventListener('click', () => openAuthModal(true));
            signupBtn.addEventListener('click', () => openAuthModal(false));
            getStartedBtn.addEventListener('click', () => openAuthModal(false));
            closeModal.addEventListener('click', closeAuthModal);
            switchAuthMode.addEventListener('click', toggleAuthMode);
            authActionBtn.addEventListener('click', handleAuthAction);
            googleSignIn.addEventListener('click', signInWithGoogle);
            facebookSignIn.addEventListener('click', signInWithFacebook);
            
            // Chat
            findMatchBtn.addEventListener('click', findMatch);
            connectFindMatchBtn.addEventListener('click', findMatch);
            endChatBtn.addEventListener('click', endChat);
            sendMessageBtn.addEventListener('click', sendMessage);
            messageInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendMessage();
            });
            
            // Profile
            editProfileBtn.addEventListener('click', openEditProfileModal);
        }

        // Authentication functions
        function openAuthModal(isLogin) {
            isLoginMode = isLogin;
            modalTitle.textContent = isLogin ? 'Log In' : 'Sign Up';
            authActionBtn.textContent = isLogin ? 'Log In' : 'Create Account';
            authSwitchText.textContent = isLogin ? "Don't have an account?" : "Already have an account?";
            switchAuthMode.textContent = isLogin ? 'Sign Up' : 'Log In';
            signupFields.style.display = isLogin ? 'none' : 'block';
            authError.style.display = 'none';
            authSuccess.style.display = 'none';
            authModal.style.display = 'flex';
        }

        function closeAuthModal() {
            authModal.style.display = 'none';
            // Clear form fields
            document.getElementById('fullName').value = '';
            document.getElementById('gender').value = '';
            document.getElementById('country').value = '';
            document.getElementById('email').value = '';
            document.getElementById('password').value = '';
        }

        function toggleAuthMode(e) {
            e.preventDefault();
            openAuthModal(!isLoginMode);
        }

        function handleAuthAction() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            if (!email || !password) {
                showAuthError('Please fill in all fields');
                return;
            }
            
            if (isLoginMode) {
                // Login
                auth.signInWithEmailAndPassword(email, password)
                    .then((userCredential) => {
                        showAuthSuccess('Login successful!');
                        setTimeout(closeAuthModal, 1000);
                    })
                    .catch((error) => {
                        showAuthError(error.message);
                    });
            } else {
                // Sign up
                const fullName = document.getElementById('fullName').value;
                const gender = document.getElementById('gender').value;
                const country = document.getElementById('country').value;
                
                if (!fullName || !gender || !country) {
                    showAuthError('Please fill in all fields');
                    return;
                }
                
                auth.createUserWithEmailAndPassword(email, password)
                    .then((userCredential) => {
                        const user = userCredential.user;
                        // Create user profile in Firestore
                        return db.collection('users').doc(user.uid).set({
                            uid: user.uid,
                            displayName: fullName,
                            email: email,
                            gender: gender,
                            country: country,
                            createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                            kindnessPoints: 0,
                            connections: 0,
                            activeDays: 1,
                            lastActive: firebase.firestore.FieldValue.serverTimestamp()
                        });
                    })
                    .then(() => {
                        showAuthSuccess('Account created successfully!');
                        setTimeout(closeAuthModal, 1000);
                    })
                    .catch((error) => {
                        showAuthError(error.message);
                    });
            }
        }

        function signInWithGoogle() {
            // For demo purposes - in a real app, you would set up Google Auth Provider
            showAuthError('Google sign-in not configured in this demo');
        }

        function signInWithFacebook() {
            // For demo purposes - in a real app, you would set up Facebook Auth Provider
            showAuthError('Facebook sign-in not configured in this demo');
        }

        function showAuthError(message) {
            authError.textContent = message;
            authError.style.display = 'block';
            authSuccess.style.display = 'none';
        }

        function showAuthSuccess(message) {
            authSuccess.textContent = message;
            authSuccess.style.display = 'block';
            authError.style.display = 'none';
        }

        // Update UI based on auth state
        function updateUIForUser(user) {
            loginBtn.textContent = 'Profile';
            signupBtn.textContent = 'Log Out';
            signupBtn.onclick = () => auth.signOut();
        }

        function updateUIForGuest() {
            loginBtn.textContent = 'Log In';
            signupBtn.textContent = 'Sign Up';
            signupBtn.onclick = () => openAuthModal(false);
            chatContainer.style.display = 'none';
        }

        // Load user profile from Firestore
        function loadUserProfile(uid) {
            db.collection('users').doc(uid).get()
                .then((doc) => {
                    if (doc.exists) {
                        userProfile = doc.data();
                        updateProfileUI(userProfile);
                    }
                })
                .catch((error) => {
                    console.error("Error loading user profile:", error);
                });
        }

        // Update profile UI with user data
        function updateProfileUI(profile) {
            profileName.textContent = profile.displayName || 'User';
            profileBio.textContent = `${profile.gender || ''} â€¢ ${profile.country || ''}`;
            connectionsCount.textContent = profile.connections || 0;
            pointsCount.textContent = profile.kindnessPoints || 0;
            kindnessPoints.textContent = profile.kindnessPoints || 0;
            activeDays.textContent = profile.activeDays || 1;
            
            // Set avatar initial
            const initial = profile.displayName ? profile.displayName.charAt(0).toUpperCase() : 'U';
            profileAvatar.innerHTML = initial;
        }

        // Find a match based on selected mood
        function findMatch() {
            if (!currentUser) {
                openAuthModal(true);
                return;
            }
            
            if (!selectedMood) {
                alert('Please select a mood first!');
                return;
            }
            
            // In a real app, this would query Firestore for users with complementary moods
            // For demo purposes, we'll simulate finding a match
            const potentialPartners = [
                { name: "Alex", mood: "Calm" },
                { name: "Sam", mood: "Thoughtful" },
                { name: "Jordan", mood: "Happy" }
            ];
            
            const partner = potentialPartners[Math.floor(Math.random() * potentialPartners.length)];
            currentChatPartner = partner;
            
            // Show chat interface
            chatContainer.style.display = 'block';
            chatPartnerName.textContent = partner.name;
            connectionInfo.textContent = `Connected through: ${selectedMood.name} & ${partner.mood}`;
            
            // Clear previous messages
            chatMessages.innerHTML = '';
            
            // Add welcome message
            addMessageToChat('system', `You've been connected with ${partner.name} who is feeling ${partner.mood.toLowerCase()}!`);
            addMessageToChat('partner', `Hi there! I see we're matched through our moods. How's your day going?`);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Scroll to chat
            chatContainer.scrollIntoView({ behavior: 'smooth' });
        }

        // Add a message to the chat
        function addMessageToChat(sender, message) {
            const messageElement = document.createElement('div');
            
            if (sender === 'system') {
                messageElement.className = 'message system';
                messageElement.innerHTML = `
                    <div class="message-avatar">MM</div>
                    <div class="message-content" style="background: #e0e0e0; color: #555;">${message}</div>
                `;
            } else if (sender === 'self') {
                messageElement.className = 'message self';
                messageElement.innerHTML = `
                    <div class="message-avatar">${currentUser.displayName ? currentUser.displayName.charAt(0).toUpperCase() : 'Y'}</div>
                    <div class="message-content">${message}</div>
                `;
            } else {
                messageElement.className = 'message';
                messageElement.innerHTML = `
                    <div class="message-avatar">${currentChatPartner.name.charAt(0).toUpperCase()}</div>
                    <div class="message-content">${message}</div>
                `;
            }
            
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Send a message
        function sendMessage() {
            const message = messageInput.value.trim();
            if (message === '') return;
            
            // Add message to chat
            addMessageToChat('self', message);
            
            // Clear input
            messageInput.value = '';
            
            // Simulate response after a delay
            setTimeout(() => {
                const responses = [
                    "That's interesting! Tell me more about that.",
                    "I can relate to how you're feeling.",
                    "Thanks for sharing that with me.",
                    "I appreciate your perspective on this.",
                    "That sounds challenging. How are you handling it?",
                    "I'm glad you shared that with me."
                ];
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                
                addMessageToChat('partner', randomResponse);
            }, 1000 + Math.random() * 2000);
        }

        // End the current chat
        function endChat() {
            if (confirm('Are you sure you want to end this chat?')) {
                chatContainer.style.display = 'none';
                
                // Show mood summary
                alert("You made someone's day! Thanks for connecting.");
                
                // Update user stats (in a real app, this would update Firestore)
                if (userProfile) {
                    userProfile.connections = (userProfile.connections || 0) + 1;
                    userProfile.kindnessPoints = (userProfile.kindnessPoints || 0) + 5;
                    updateProfileUI(userProfile);
                    
                    // In a real app, we would update Firestore here
                    // db.collection('users').doc(currentUser.uid).update({
                    //     connections: userProfile.connections,
                    //     kindnessPoints: userProfile.kindnessPoints
                    // });
                }
            }
        }

        // Open edit profile modal (simplified for demo)
        function openEditProfileModal() {
            alert('Edit profile functionality would open here in a full implementation');
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
